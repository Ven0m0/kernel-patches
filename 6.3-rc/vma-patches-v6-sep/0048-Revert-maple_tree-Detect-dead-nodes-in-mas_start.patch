From 12af09d194e0fa3b6afeb08a3daa30c54a350bfa Mon Sep 17 00:00:00 2001
From: Piotr Gorski <lucjan.lucjanov@gmail.com>
Date: Mon, 27 Mar 2023 22:04:42 +0200
Subject: [PATCH 48/57] Revert "maple_tree: Detect dead nodes in mas_start()"

This reverts commit f44cbc55ac0cf51568f479c33d00ee7b2150b9f0.

Signed-off-by: Piotr Gorski <lucjan.lucjanov@gmail.com>
---
 lib/maple_tree.c | 4 ----
 1 file changed, 4 deletions(-)

diff --git a/lib/maple_tree.c b/lib/maple_tree.c
index 3d5333965..095b9cb1f 100644
--- a/lib/maple_tree.c
+++ b/lib/maple_tree.c
@@ -1360,16 +1360,12 @@ static inline struct maple_enode *mas_start(struct ma_state *mas)
 		mas->max = ULONG_MAX;
 		mas->depth = 0;
 
-retry:
 		root = mas_root(mas);
 		/* Tree with nodes */
 		if (likely(xa_is_node(root))) {
 			mas->depth = 1;
 			mas->node = mte_safe_root(root);
 			mas->offset = 0;
-			if (mte_dead_node(mas->node))
-				goto retry;
-
 			return NULL;
 		}
 
-- 
2.40.0.71.g950264636c

