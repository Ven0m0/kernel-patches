From 1135ed1654c6a32514b55ffe9d2e17f764d00472 Mon Sep 17 00:00:00 2001
From: Suren Baghdasaryan <surenb@google.com>
Date: Sun, 31 Jul 2022 13:19:09 -0700
Subject: [PATCH 40/40] TESTING: set required configurations and request some
 context captures

Signed-off-by: Suren Baghdasaryan <surenb@google.com>
---
 drivers/staging/ctagmod/Kconfig |  1 +
 lib/Kconfig.debug               | 17 +++++++++++++++++
 2 files changed, 18 insertions(+)

diff --git a/drivers/staging/ctagmod/Kconfig b/drivers/staging/ctagmod/Kconfig
index f267ffc6a..e66394482 100644
--- a/drivers/staging/ctagmod/Kconfig
+++ b/drivers/staging/ctagmod/Kconfig
@@ -2,6 +2,7 @@
 config CTAGMOD
 	tristate "Code tagging test module"
 	depends on CODE_TAGGING
+	default m
 	help
 	  Code tagging test module.
 
diff --git a/lib/Kconfig.debug b/lib/Kconfig.debug
index 9d2685ec4..289b3cb32 100644
--- a/lib/Kconfig.debug
+++ b/lib/Kconfig.debug
@@ -999,6 +999,23 @@ config MEM_ALLOC_PROFILING_DEBUG
 	  Adds warnings with helpful error messages for memory allocation
 	  profiling.
 
+config CODE_TAG_TESTING
+	bool "Enable code tag testing"
+	default y
+	select MEM_ALLOC_PROFILING
+	select STAGING
+	help
+	  Enable to test code tagging.
+
+config CODE_TAG_TESTING_DEBUG
+	bool "Enable code tag testing debug"
+	default y
+	select MEM_ALLOC_PROFILING
+	select MEM_ALLOC_PROFILING_DEBUG
+	select STAGING
+	help
+	  Enable to test code tagging.
+
 source "lib/Kconfig.kasan"
 source "lib/Kconfig.kfence"
 source "lib/Kconfig.kmsan"
-- 
2.43.0.232.ge79552d197

