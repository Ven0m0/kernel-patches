From 8032b3b4f49a7de8b0d1abf306f8eaf267e59a6e Mon Sep 17 00:00:00 2001
From: Piotr Gorski <lucjan.lucjanov@gmail.com>
Date: Wed, 21 Dec 2022 08:48:52 +0100
Subject: [PATCH 26/40] Revert "maple_tree: refine mab_calc_split function"

This reverts commit 9076a055d2c7f68b1ada6fffe23f002ea3f84834.

Signed-off-by: Piotr Gorski <lucjan.lucjanov@gmail.com>
---
 lib/maple_tree.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/lib/maple_tree.c b/lib/maple_tree.c
index a7a97e157..1f765c344 100644
--- a/lib/maple_tree.c
+++ b/lib/maple_tree.c
@@ -1883,9 +1883,10 @@ static inline int mab_calc_split(struct ma_state *mas,
 
 	/* Avoid ending a node on a NULL entry */
 	split = mab_no_null_split(bn, split, slot_count);
+	if (!(*mid_split))
+		return split;
 
-	if (*mid_split)
-		*mid_split = mab_no_null_split(bn, *mid_split, slot_count);
+	*mid_split = mab_no_null_split(bn, *mid_split, slot_count);
 
 	return split;
 }
-- 
2.39.0.rc2.1.gbd5df96b79

