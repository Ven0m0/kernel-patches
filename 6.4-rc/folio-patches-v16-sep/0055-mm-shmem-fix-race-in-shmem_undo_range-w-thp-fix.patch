From baebf57bbabb1ff3bd87073efc50fbf6071d751a Mon Sep 17 00:00:00 2001
From: Andrew Morton <akpm@linux-foundation.org>
Date: Wed, 7 Jun 2023 11:58:24 -0700
Subject: [PATCH 55/55] mm-shmem-fix-race-in-shmem_undo_range-w-thp-fix

tidy up comment layout

Cc: David Stevens <stevensd@chromium.org>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
---
 mm/shmem.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/mm/shmem.c b/mm/shmem.c
index e517ab50a..c755599e3 100644
--- a/mm/shmem.c
+++ b/mm/shmem.c
@@ -1035,10 +1035,12 @@ static void shmem_undo_range(struct inode *inode, loff_t lstart, loff_t lend,
 					truncate_inode_folio(mapping, folio);
 				} else if (truncate_inode_partial_folio(folio, lstart, lend)) {
 					/*
-					 * If we split a page, reset the loop so that we
-					 * pick up the new sub pages. Otherwise the THP
-					 * was entirely dropped or the target range was
-					 * zeroed, so just continue the loop as is.
+					 * If we split a page, reset the loop so
+					 * that we pick up the new sub pages.
+					 * Otherwise the THP was entirely
+					 * dropped or the target range was
+					 * zeroed, so just continue the loop as
+					 * is.
 					 */
 					if (!folio_test_large(folio)) {
 						folio_unlock(folio);
-- 
2.41.0

