From 35fe57be5217a04f546e6cc2a3b13cdb780bf4d1 Mon Sep 17 00:00:00 2001
From: Paolo Valente <paolo.valente@linaro.org>
Date: Thu, 14 Jan 2021 10:28:03 +0100
Subject: [PATCH 18/34] block, bfq, DEBUG: print weights on idle-busy switch

Signed-off-by: Paolo Valente <paolo.valente@linaro.org>
---
 block/bfq-iosched.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/block/bfq-iosched.c b/block/bfq-iosched.c
index 102b02f72..3fc20ae9d 100644
--- a/block/bfq-iosched.c
+++ b/block/bfq-iosched.c
@@ -1827,6 +1827,10 @@ static void bfq_bfqq_handle_idle_busy_switch(struct bfq_data *bfqd,
 		     bfq_bfqq_non_blocking_wait_rq(bfqq),
 		     old_wr_coeff);
 
+	bfq_log_bfqq(bfqd, bfqq,
+		     "new_weight %d weight %d",
+		     bfqq->entity.new_weight, bfqq->entity.weight);
+
 	BFQ_BUG_ON(bfqq->entity.budget < bfqq->entity.service);
 
 	BFQ_BUG_ON(bfqq == bfqd->in_service_queue);
-- 
2.31.1.362.g311531c9de

